<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>勤怠管理システム</title>
<link rel="stylesheet" href="style.css">
<script src="/socket.io/socket.io.js"></script>
</head>
<body>
<div class="container">
<!-- ログイン画面 -->
<div id="loginScreen" class="screen">
<div class="login-form">
<h1>勤怠管理システム</h1>

<!-- ログインフォーム -->
<div id="loginFormContainer">
<h2>ログイン</h2>
<form id="loginForm">
<div class="form-group">
<label for="loginUsername">ユーザー名:</label>
<input type="text" id="loginUsername" required>
</div>
<div class="form-group">
<label for="loginPassword">パスワード:</label>
<input type="password" id="loginPassword" required>
</div>
<button type="submit">ログイン</button>
</form>
<div id="loginError" class="error-message"></div>

<div class="switch-form">
<p>アカウントをお持ちでない方は <button type="button" id="showRegisterBtn" class="link-btn">新規登録</button></p>
</div>

<div class="demo-accounts">
<h3>オーナーアカウント</h3>
<p>管理者ログイン:</p>
<ul>
<li>sanada / sanada</li>
</ul>
</div>
</div>

<!-- 新規登録フォーム -->
<div id="registerFormContainer" class="hidden">
<h2>新規登録</h2>
<form id="registerForm">
<div class="form-group">
<label for="registerName">表示名:</label>
<input type="text" id="registerName" required>
</div>
<div class="form-group">
<label for="registerUsername">ユーザー名:</label>
<input type="text" id="registerUsername" required minlength="3">
<small>3文字以上で入力してください</small>
</div>
<div class="form-group">
<label for="registerPassword">パスワード:</label>
<input type="password" id="registerPassword" required minlength="6">
<small>6文字以上で入力してください</small>
</div>
<div class="form-group">
<label for="registerPasswordConfirm">パスワード確認:</label>
<input type="password" id="registerPasswordConfirm" required minlength="6">
</div>
<button type="submit">登録</button>
</form>
<div id="registerError" class="error-message"></div>
<div id="registerSuccess" class="success-message"></div>

<div class="switch-form">
<p>既にアカウントをお持ちの方は <button type="button" id="showLoginBtn" class="link-btn">ログイン</button></p>
</div>
</div>
</div>
</div>

        <!-- メイン画面 -->
        <div id="mainScreen" class="screen hidden">
            <!-- 右側固定メニュー -->
            <div id="sideMenu" class="side-menu">
                <div class="side-menu-header">
                    <h3>メニュー</h3>
                    <button id="toggleSideMenu" class="toggle-btn">×</button>
                </div>
                <div class="side-menu-content">
                    <a href="accounting.html" class="menu-item">
                        <div class="menu-icon">💰</div>
                        <span>会計システム</span>
                    </a>
                    <div class="menu-item" onclick="showMessage('機能準備中です', 'success')">
                        <div class="menu-icon">📊</div>
                        <span>レポート</span>
                    </div>
                    <div class="menu-item" onclick="showMessage('機能準備中です', 'success')">
                        <div class="menu-icon">⚙️</div>
                        <span>設定</span>
                    </div>
                </div>
            </div>
            
            <!-- メニュートグルボタン -->
            <button id="showSideMenu" class="show-menu-btn hidden">☰</button>
            
            <header>
                <h1>🍣 寿司の華 - 勤怠管理システム</h1>
                <div class="user-info">
                    <span id="userName"></span>
                    <button id="logoutBtn">ログアウト</button>
                </div>
            </header>

<main>
<!-- タブメニュー -->
<div class="tab-menu">
<button id="dashboardTab" class="tab-btn active">ダッシュボード</button>
<button id="historyTab" class="tab-btn">出勤履歴</button>
<button id="adminTab" class="tab-btn hidden" data-role="owner">
管理画面
<span id="notificationBadge" class="notification-badge hidden">0</span>
</button>
</div>

<!-- ダッシュボード画面 -->
<div id="dashboardContent" class="tab-content">
<!-- 出勤・退勤ボタン -->
<div class="attendance-controls">
<button id="checkinBtn" class="btn-checkin">出勤</button>
<button id="checkoutBtn" class="btn-checkout">退勤</button>
</div>

<!-- 現在時刻表示 -->
<div class="current-time">
<h3>現在時刻</h3>
<div id="currentTime"></div>
</div>

                    <!-- 出勤状況表示 -->
                    <div class="attendance-status">
                        <h3>メンバー一覧 <span class="online-count" id="onlineCount">0</span>人出勤中</h3>
                        <div id="onlineUsers" class="employee-list"></div>
                    </div>
</div>

<!-- 出勤履歴画面 -->
<div id="historyContent" class="tab-content hidden">
<div class="history-header">
<h3>出勤履歴</h3>
<div class="history-summary">
<div class="summary-item">
<span class="summary-label">今月の出勤日数:</span>
<span id="monthlyDays" class="summary-value">0日</span>
</div>
<div class="summary-item">
<span class="summary-label">今月の総勤務時間:</span>
<span id="monthlyHours" class="summary-value">0時間0分</span>
</div>
</div>
</div>

<div class="history-list">
<div id="attendanceHistory" class="history-records"></div>
<div id="historyLoading" class="loading hidden">読み込み中...</div>
<div id="historyEmpty" class="empty-message hidden">出勤履歴がありません</div>
</div>
</div>

<!-- 管理画面（オーナー専用） -->
<div id="adminContent" class="tab-content hidden">
<div class="admin-header">
<h3>管理画面</h3>
</div>

<!-- 管理メニュー -->
<div class="admin-menu">
<button id="employeeStatsBtn" class="admin-menu-btn active">従業員統計</button>
<button id="notificationsBtn" class="admin-menu-btn">
通知管理
<span id="unreadCount" class="notification-badge hidden">0</span>
</button>
<button id="bonusesBtn" class="admin-menu-btn">ボーナス履歴</button>
</div>

<!-- 従業員統計 -->
<div id="employeeStatsContent" class="admin-content">
<h4>従業員出勤統計</h4>
<div id="employeeStats" class="employee-stats"></div>
<div id="statsLoading" class="loading hidden">読み込み中...</div>
</div>

<!-- 通知管理 -->
<div id="notificationsContent" class="admin-content hidden">
<h4>通知管理</h4>
<div id="notificationsList" class="notifications-list"></div>
<div id="notificationsLoading" class="loading hidden">読み込み中...</div>
<div id="notificationsEmpty" class="empty-message hidden">通知がありません</div>
</div>

<!-- ボーナス履歴 -->
<div id="bonusesContent" class="admin-content hidden">
<h4>ボーナス履歴</h4>
<div id="bonusesList" class="bonuses-list"></div>
<div id="bonusesLoading" class="loading hidden">読み込み中...</div>
<div id="bonusesEmpty" class="empty-message hidden">ボーナス履歴がありません</div>
</div>
</div>

<!-- メッセージ表示 -->
<div id="message" class="message"></div>
</main>
</div>
</div>

<script src="script.js" defer></script>
</body>
</html>